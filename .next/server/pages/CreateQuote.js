"use strict";(()=>{var e={};e.id=8594,e.ids=[8594,660],e.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},679:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>y,default:()=>p,getServerSideProps:()=>x,getStaticPaths:()=>h,getStaticProps:()=>f,reportWebVitals:()=>g,routeModule:()=>w,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>_,unstable_getStaticProps:()=>v});var n=a(7093),s=a(5244),i=a(1323),o=a(1682),l=a.n(o),d=a(8141),c=a.n(d),u=a(0),m=e([u]);u=(m.then?(await m)():m)[0];let p=(0,i.l)(u,"default"),f=(0,i.l)(u,"getStaticProps"),h=(0,i.l)(u,"getStaticPaths"),x=(0,i.l)(u,"getServerSideProps"),y=(0,i.l)(u,"config"),g=(0,i.l)(u,"reportWebVitals"),v=(0,i.l)(u,"unstable_getStaticProps"),_=(0,i.l)(u,"unstable_getStaticPaths"),j=(0,i.l)(u,"unstable_getStaticParams"),b=(0,i.l)(u,"unstable_getServerProps"),N=(0,i.l)(u,"unstable_getServerSideProps"),w=new n.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/CreateQuote",pathname:"/CreateQuote",bundlePath:"",filename:""},components:{App:c(),Document:l()},userland:u});r()}catch(e){r(e)}})},3592:(e,t,a)=>{a.d(t,{Z:()=>u});var r=a(6689);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:c,...u},m)=>(0,r.createElement)("svg",{ref:m,...d,width:t,height:t,stroke:e,strokeWidth:n?24*Number(a)/Number(t):a,className:o("lucide",s),...!i&&!l(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(i)?i:[i]])),u=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...s},l)=>(0,r.createElement)(c,{ref:l,iconNode:t,className:o(`lucide-${n(i(e))}`,`lucide-${e}`,a),...s}));return a.displayName=i(e),a}},906:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(3592).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9934:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(3592).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},7493:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(3592).Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},6460:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(3592).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1560:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(3592).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8141:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let r=a(5577),n=a(997),s=r._(a(6689)),i=a(5782);async function o(e){let{Component:t,ctx:a}=e;return{pageProps:await (0,i.loadGetInitialProps)(t,a)}}class l extends s.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,n.jsx)(e,{...t})}}l.origGetInitialProps=o,l.getInitialProps=o,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1887:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{L:()=>c});var n=a(997),s=a(6689);a(6573);var i=a(7825),o=a(5659),l=a(7270),d=e([i,o,l]);function c({value:e,onChange:t,onClientSelect:a}){let[r,l]=(0,s.useState)([]),[d,c]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"space-y-2",children:[n.jsx(i._,{htmlFor:"client",children:"Client"}),(0,n.jsxs)(o.Ph,{value:e,onValueChange:e=>{if(t(e),a){let t=r.find(t=>t.id===e);t&&a(t)}},children:[n.jsx(o.i4,{children:n.jsx(o.ki,{placeholder:"Select a client"})}),n.jsx(o.Bw,{children:d?n.jsx(o.Ql,{value:"loading",disabled:!0,children:"Loading..."}):0===r.length?n.jsx(o.Ql,{value:"empty",disabled:!0,children:"No clients found"}):r.map(e=>n.jsx(o.Ql,{value:e.id,children:e.name},e.id))})]})]})}[i,o,l]=d.then?(await d)():d,r()}catch(e){r(e)}})},1e3:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{y:()=>c});var n=a(997),s=a(6689);a(6573);var i=a(7825),o=a(5659),l=a(7270),d=e([i,o,l]);function c({value:e,onChange:t,onProjectSelect:a}){let[r,l]=(0,s.useState)([]),[d,c]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"space-y-2",children:[n.jsx(i._,{htmlFor:"project",children:"Project"}),(0,n.jsxs)(o.Ph,{value:e,onValueChange:e=>{if(t(e),a){let t=r.find(t=>t.id===e);t&&a(t)}},children:[n.jsx(o.i4,{children:n.jsx(o.ki,{placeholder:"Select a project"})}),n.jsx(o.Bw,{children:d?n.jsx(o.Ql,{value:"loading",disabled:!0,children:"Loading..."}):0===r.length?n.jsx(o.Ql,{value:"empty",disabled:!0,children:"No projects found"}):r.map(e=>n.jsx(o.Ql,{value:e.id,children:e.name},e.id))})]})]})}[i,o,l]=d.then?(await d)():d,r()}catch(e){r(e)}})},5364:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{z:()=>u});var n=a(997),s=a(6689),i=a(4338),o=a(6926),l=a(7742),d=e([i,o,l]);[i,o,l]=d.then?(await d)():d;let c=(0,o.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...s},o)=>{let d=r?i.Slot:"button";return n.jsx(d,{className:(0,l.cn)(c({variant:t,size:a,className:e})),ref:o,...s})});u.displayName="Button",r()}catch(e){r(e)}})},947:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Ol:()=>d,SZ:()=>u,Zb:()=>l,aY:()=>m,eW:()=>p,ll:()=>c});var n=a(997),s=a(6689),i=a(7742),o=e([i]);i=(o.then?(await o)():o)[0];let l=s.forwardRef(({className:e,...t},a)=>n.jsx("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));l.displayName="Card";let d=s.forwardRef(({className:e,...t},a)=>n.jsx("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));d.displayName="CardHeader";let c=s.forwardRef(({className:e,...t},a)=>n.jsx("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let u=s.forwardRef(({className:e,...t},a)=>n.jsx("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));u.displayName="CardDescription";let m=s.forwardRef(({className:e,...t},a)=>n.jsx("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...t}));m.displayName="CardContent";let p=s.forwardRef(({className:e,...t},a)=>n.jsx("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));p.displayName="CardFooter",r()}catch(e){r(e)}})},7095:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{I:()=>l});var n=a(997),s=a(6689),i=a(7742),o=e([i]);i=(o.then?(await o)():o)[0];let l=s.forwardRef(({className:e,type:t,...a},r)=>n.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...a}));l.displayName="Input",r()}catch(e){r(e)}})},7825:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{_:()=>u});var n=a(997),s=a(6689),i=a(49),o=a(6926),l=a(7742),d=e([i,o,l]);[i,o,l]=d.then?(await d)():d;let c=(0,o.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef(({className:e,...t},a)=>n.jsx(i.Root,{ref:a,className:(0,l.cn)(c(),e),...t}));u.displayName=i.Root.displayName,r()}catch(e){r(e)}})},5659:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{Bw:()=>x,Ph:()=>u,Ql:()=>y,i4:()=>p,ki:()=>m});var n=a(997),s=a(6689);!function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}();var i=a(9934),o=a(7493),l=a(906),d=a(7742),c=e([d]);d=(c.then?(await c)():c)[0];let u=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}());!function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}();let m=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),p=s.forwardRef(({className:e,children:t,...a},r)=>(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,n.jsx(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{asChild:!0,children:n.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName;let f=s.forwardRef(({className:e,...t},a)=>n.jsx(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(o.Z,{className:"h-4 w-4"})}));f.displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName;let h=s.forwardRef(({className:e,...t},a)=>n.jsx(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(i.Z,{className:"h-4 w-4"})}));h.displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName;let x=s.forwardRef(({className:e,children:t,position:a="popper",...r},s)=>n.jsx(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[n.jsx(f,{}),n.jsx(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(h,{})]})}));x.displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName,s.forwardRef(({className:e,...t},a)=>n.jsx(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName;let y=s.forwardRef(({className:e,children:t,...a},r)=>(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx(l.Z,{className:"h-4 w-4"})})}),n.jsx(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{children:t})]}));y.displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName,s.forwardRef(({className:e,...t},a)=>n.jsx(Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-select'");throw e.code="MODULE_NOT_FOUND",e}()).displayName,r()}catch(e){r(e)}})},9451:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{g:()=>l});var n=a(997),s=a(6689),i=a(7742),o=e([i]);i=(o.then?(await o)():o)[0];let l=s.forwardRef(({className:e,...t},a)=>n.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));l.displayName="Textarea",r()}catch(e){r(e)}})},7568:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{a:()=>l}),a(997);var n=a(6689),s=a(550),i=e([s]);s=(i.then?(await i)():i)[0];let o=(0,n.createContext)({session:null,user:null,signOut:async()=>{},loading:!0,isAdmin:!1,userRole:null,updateUserProfile:async()=>{}}),l=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e};r()}catch(e){r(e)}})},550:(e,t,a)=>{a.a(e,async(e,r)=>{try{let e;a.d(t,{O:()=>e});var n=a(2885);try{console.log("Initializing Supabase client...");let t="https://risitify.com",a="your-production-anon-key";if(console.log("Supabase URL:",t),console.log("Supabase Anon Key:",a?"Provided":"Missing"),!t||!a)throw Error("Missing Supabase environment variables");e=(0,n.createClient)(t,a,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:void 0}}),console.log("Testing Supabase connection...");let{data:r,error:s}=await e.auth.getSession();s?console.error("Supabase connection test failed:",s):console.log("Supabase connection test successful"),console.log("Supabase client initialized successfully")}catch(e){throw console.error("Error initializing Supabase client:",e),e}r()}catch(e){r(e)}},1)},6573:(e,t,a)=>{a.d(t,{O:()=>i});var r=a(2885);let n=(void 0).VITE_SUPABASE_URL,s=(void 0).VITE_SUPABASE_ANON_KEY;if(!n||!s)throw Error("Missing Supabase environment variables");let i=(0,r.createClient)(n,s)},7742:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{cn:()=>i,x:()=>o});var n=a(6593);!function(){var e=Error("Cannot find module 'tailwind-merge'");throw e.code="MODULE_NOT_FOUND",e}();var s=e([n]);function i(...e){return Object(function(){var e=Error("Cannot find module 'tailwind-merge'");throw e.code="MODULE_NOT_FOUND",e}())((0,n.clsx)(e))}n=(s.then?(await s)():s)[0];let o=(e,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e);r()}catch(e){r(e)}})},0:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>j});var n=a(997),s=a(6689),i=a(4661),o=a(6573),l=a(5364),d=a(947),c=a(7095),u=a(7825),m=a(9451),p=a(5659),f=a(7270),h=a(1887),x=a(1e3),y=a(1560),g=a(6460),v=a(7568),_=e([l,d,c,u,m,p,f,h,x,v]);[l,d,c,u,m,p,f,h,x,v]=_.then?(await _)():_;let j=()=>{let e=(0,i.useNavigate)(),{user:t}=(0,v.a)(),[a,r]=(0,s.useState)(!1),[_,j]=(0,s.useState)([]),[b,N]=(0,s.useState)([]),[w,O]=(0,s.useState)(null),[E,S]=(0,s.useState)(!1),[C,U]=(0,s.useState)([{description:"",quantity:1,unit_price:0,amount:0}]),[P,D]=(0,s.useState)(""),[F,T]=(0,s.useState)({client_id:"",project_id:"",quote_number:"",issue_date:new Date().toISOString().split("T")[0],expiry_date:new Date(Date.now()+2592e6).toISOString().split("T")[0],payment_terms:"30",notes:"",terms:"",tax_rate:0,tax_type:"none",currency:"USD",payment_type:"full",payment_percentage:100,subtotal_amount:0,tax_amount:0,total_amount:0}),k=[{code:"USD",symbol:"$"},{code:"EUR",symbol:"€"},{code:"GBP",symbol:"\xa3"},{code:"NGN",symbol:"₦"},{code:"INR",symbol:"₹"}];(0,s.useEffect)(()=>{M(),R(),L()},[]);let M=()=>{let e=Math.floor(1e6*Math.random()).toString().padStart(6,"0"),t=new Date().toISOString().slice(2,4);D(`QT${t}${e}`)},L=async()=>{try{let{data:{user:e}}=await o.O.auth.getUser();if(!e)throw Error("No authenticated user found");let{data:t,error:a}=await o.O.from("invoice_settings").select("*").eq("user_id",e.id).single();if(a)throw a;if(t)O(t);else{let{data:t,error:a}=await o.O.from("invoice_settings").insert([{user_id:e.id,currency:"USD",language:"English",tax_type:"none",tax_rate:0,payment_terms:"net_30",template:"standard",auto_reminders:!0,late_payment_fee:!0,late_fee_percentage:5}]).select().single();if(a)throw a;O(t)}t?.tax_rate&&T(e=>({...e,tax_rate:t.tax_rate,tax_type:t.tax_type||"none"}))}catch(e){console.error("Error fetching tax settings:",e),f.toast.error("Failed to fetch tax settings. Please try again later.")}},R=async()=>{try{let{data:{user:e}}=await o.O.auth.getUser();if(!e)throw Error("No authenticated user found");let{data:t,error:a}=await o.O.from("clients").select("*").eq("user_id",e.id).order("name",{ascending:!0});if(a)throw a;j(t||[])}catch(e){console.error("Error fetching clients:",e),f.toast.error("Failed to fetch clients")}},A=e=>e.quantity*e.unit_price,q=(e,t,a)=>{let r=[...C];r[e]={...r[e],[t]:a},r[e].amount=A(r[e]),U(r);let n=r.reduce((e,t)=>e+(t.amount||0),0),s=F.tax_rate/100*n,i=n+s;T(e=>({...e,subtotal_amount:n,tax_amount:s,total_amount:i}))},I=e=>{let t=C.filter((t,a)=>a!==e);U(t)},Z=async a=>{a.preventDefault(),r(!0);try{let{data:a,error:r}=await o.O.from("quotes").insert([{user_id:t?.id,client_id:F.client_id,quote_number:P,status:"draft",issue_date:F.issue_date,expiry_date:F.expiry_date,total_amount:F.total_amount,tax_amount:F.tax_amount,notes:F.notes,terms:F.terms,payment_terms:F.payment_terms}]).select().single();if(r)throw r;if(C.length>0){let{error:e}=await o.O.from("quote_items").insert(C.map(e=>({quote_id:a.id,description:e.description,quantity:e.quantity,unit_price:e.unit_price,tax_rate:F.tax_rate,amount:e.amount})));if(e)throw e}f.toast.success("Quote created successfully"),e("/quotes")}catch(e){console.error("Error creating quote:",e),f.toast.error("Failed to create quote")}finally{r(!1)}},Q=()=>k.find(e=>e.code===F.currency)?.symbol||"$";return(0,n.jsxs)("div",{className:"container mx-auto py-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Create Quote"}),n.jsx("p",{className:"text-muted-foreground",children:"Create a new quote for your client"})]}),(0,n.jsxs)("form",{onSubmit:Z,className:"space-y-8",children:[(0,n.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[n.jsx(u._,{htmlFor:"quote_number",children:"Quote Number"}),n.jsx(c.I,{id:"quote_number",value:P,onChange:e=>D(e.target.value),className:"w-full"})]}),(0,n.jsxs)("div",{children:[n.jsx(u._,{htmlFor:"client",children:"Client"}),n.jsx(h.L,{value:F.client_id,onChange:e=>T(t=>({...t,client_id:e}))})]}),n.jsx("div",{children:n.jsx(x.y,{value:F.project_id,onChange:e=>T(t=>({...t,project_id:e})),onProjectSelect:e=>{T(t=>({...t,project_id:e.id,project_name:e.name,description:e.description||""}))}})}),(0,n.jsxs)("div",{children:[n.jsx(u._,{htmlFor:"description",children:"Description"}),n.jsx(m.g,{id:"description",value:F.description,onChange:e=>T(t=>({...t,description:e.target.value})),className:"w-full",rows:3})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[n.jsx(u._,{htmlFor:"issue_date",children:"Issue Date"}),n.jsx(c.I,{type:"date",id:"issue_date",value:F.issue_date,onChange:e=>T(t=>({...t,issue_date:e.target.value}))})]}),(0,n.jsxs)("div",{children:[n.jsx(u._,{htmlFor:"expiry_date",children:"Expiry Date"}),n.jsx(c.I,{type:"date",id:"expiry_date",value:F.expiry_date,onChange:e=>T(t=>({...t,expiry_date:e.target.value}))})]}),(0,n.jsxs)("div",{children:[n.jsx(u._,{htmlFor:"currency",children:"Currency"}),(0,n.jsxs)(p.Ph,{value:F.currency,onValueChange:e=>T(t=>({...t,currency:e})),children:[n.jsx(p.i4,{children:n.jsx(p.ki,{placeholder:"Select currency"})}),n.jsx(p.Bw,{children:k.map(e=>(0,n.jsxs)(p.Ql,{value:e.code,children:[e.code," (",e.symbol,")"]},e.code))})]})]}),(0,n.jsxs)("div",{children:[n.jsx(u._,{htmlFor:"notes",children:"Notes"}),n.jsx(m.g,{id:"notes",value:F.notes,onChange:e=>T(t=>({...t,notes:e.target.value}))})]}),(0,n.jsxs)("div",{children:[n.jsx(u._,{htmlFor:"terms",children:"Terms"}),n.jsx(m.g,{id:"terms",value:F.terms,onChange:e=>T(t=>({...t,terms:e.target.value}))})]}),(0,n.jsxs)("div",{children:[n.jsx(u._,{htmlFor:"payment_type",children:"Payment Type"}),(0,n.jsxs)(p.Ph,{value:F.payment_type,onValueChange:e=>T(t=>({...t,payment_type:e,payment_percentage:"full"===e?100:50})),children:[n.jsx(p.i4,{children:n.jsx(p.ki,{placeholder:"Select payment type"})}),(0,n.jsxs)(p.Bw,{children:[n.jsx(p.Ql,{value:"full",children:"Full Payment"}),n.jsx(p.Ql,{value:"partial",children:"Partial Payment"})]})]})]}),"partial"===F.payment_type&&(0,n.jsxs)("div",{children:[n.jsx(u._,{htmlFor:"payment_percentage",children:"Payment Percentage"}),n.jsx(c.I,{type:"number",id:"payment_percentage",min:"0",max:"100",value:F.payment_percentage,onChange:e=>T(t=>({...t,payment_percentage:Number(e.target.value)}))})]}),(0,n.jsxs)("div",{children:[n.jsx(u._,{htmlFor:"tax",children:"Tax"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(p.Ph,{value:F.tax_type,onValueChange:e=>{S("custom"===e);let t=0;"none"===e?t=0:"standard"===e&&w?t=w.tax_rate:"custom"===e&&(t=F.tax_rate);let a=C.reduce((e,t)=>e+(t.amount||0),0),r=t/100*a,n=a+r;T(s=>({...s,tax_type:e,tax_rate:t,subtotal_amount:a,tax_amount:r,total_amount:n}))},children:[n.jsx(p.i4,{children:n.jsx(p.ki,{placeholder:"Select tax type"})}),(0,n.jsxs)(p.Bw,{children:[n.jsx(p.Ql,{value:"none",children:"No Tax (0%)"}),(0,n.jsxs)(p.Ql,{value:"standard",children:["Standard (",w?.tax_rate||0,"%)"]}),n.jsx(p.Ql,{value:"custom",children:"Custom"})]})]}),E&&n.jsx(c.I,{type:"number",min:"0",max:"100",step:"0.01",value:F.tax_rate,onChange:e=>T(t=>({...t,tax_rate:parseFloat(e.target.value)||0})),className:"w-24"})]})]})]})]}),n.jsx(d.Zb,{children:n.jsx(d.aY,{className:"p-6",children:(0,n.jsxs)("div",{className:"space-y-4",children:[C.map((e,t)=>(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[n.jsx("div",{className:"col-span-5",children:n.jsx(c.I,{placeholder:"Description",value:e.description,onChange:e=>q(t,"description",e.target.value)})}),n.jsx("div",{className:"col-span-2",children:n.jsx(c.I,{type:"number",placeholder:"Quantity",value:e.quantity,onChange:e=>q(t,"quantity",e.target.value)})}),n.jsx("div",{className:"col-span-2",children:n.jsx(c.I,{type:"number",placeholder:"Unit Price",value:e.unit_price,onChange:e=>q(t,"unit_price",e.target.value)})}),n.jsx("div",{className:"col-span-2",children:n.jsx(c.I,{type:"number",value:e.amount,disabled:!0,className:"text-right"})}),n.jsx("div",{className:"col-span-1",children:n.jsx(l.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>I(t),children:n.jsx(y.Z,{className:"h-4 w-4"})})})]},t)),(0,n.jsxs)(l.z,{type:"button",variant:"outline",onClick:()=>{U([...C,{description:"",quantity:1,unit_price:0,amount:0}])},className:"w-full",children:[n.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})})}),n.jsx(d.Zb,{children:n.jsx(d.aY,{className:"p-6",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Subtotal:"}),(0,n.jsxs)("span",{children:[Q(),F.subtotal_amount.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("span",{className:"font-medium",children:["Tax (",F.tax_rate,"%):"]}),(0,n.jsxs)("span",{children:[Q(),F.tax_amount.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[n.jsx("span",{children:"Total:"}),(0,n.jsxs)("span",{children:[Q(),F.total_amount.toFixed(2)]})]}),"partial"===F.payment_type&&(0,n.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,n.jsxs)("span",{children:["Initial Payment (",F.payment_percentage,"%):"]}),(0,n.jsxs)("span",{children:[Q(),(F.total_amount*F.payment_percentage/100).toFixed(2)]})]})]})})}),n.jsx("div",{className:"flex justify-end space-x-4",children:n.jsx(l.z,{type:"submit",className:"w-32",disabled:a,children:a?"Creating...":"Create Quote"})})]})]})};r()}catch(e){r(e)}})},5244:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},2885:e=>{e.exports=require("@supabase/supabase-js")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},4661:e=>{e.exports=require("react-router-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5315:e=>{e.exports=require("path")},49:e=>{e.exports=import("@radix-ui/react-label")},4338:e=>{e.exports=import("@radix-ui/react-slot")},6926:e=>{e.exports=import("class-variance-authority")},6593:e=>{e.exports=import("clsx")},7270:e=>{e.exports=import("sonner")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1682],()=>a(679));module.exports=r})();