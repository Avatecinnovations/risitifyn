"use strict";(()=>{var e={};e.id=4156,e.ids=[4156,660],e.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},2186:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>y,default:()=>m,getServerSideProps:()=>g,getStaticPaths:()=>h,getStaticProps:()=>x,reportWebVitals:()=>f,routeModule:()=>P,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>v});var s=a(7093),i=a(5244),n=a(1323),l=a(1682),o=a.n(l),d=a(8141),c=a.n(d),u=a(5504),p=e([u]);u=(p.then?(await p)():p)[0];let m=(0,n.l)(u,"default"),x=(0,n.l)(u,"getStaticProps"),h=(0,n.l)(u,"getStaticPaths"),g=(0,n.l)(u,"getServerSideProps"),y=(0,n.l)(u,"config"),f=(0,n.l)(u,"reportWebVitals"),v=(0,n.l)(u,"unstable_getStaticProps"),b=(0,n.l)(u,"unstable_getStaticPaths"),j=(0,n.l)(u,"unstable_getStaticParams"),w=(0,n.l)(u,"unstable_getServerProps"),N=(0,n.l)(u,"unstable_getServerSideProps"),P=new s.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/Dashboard",pathname:"/Dashboard",bundlePath:"",filename:""},components:{App:c(),Document:o()},userland:u});r()}catch(e){r(e)}})},3592:(e,t,a)=>{a.d(t,{Z:()=>u});var r=a(6689);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:i="",children:n,iconNode:c,...u},p)=>(0,r.createElement)("svg",{ref:p,...d,width:t,height:t,stroke:e,strokeWidth:s?24*Number(a)/Number(t):a,className:l("lucide",i),...!n&&!o(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(n)?n:[n]])),u=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...i},o)=>(0,r.createElement)(c,{ref:o,iconNode:t,className:l(`lucide-${s(n(e))}`,`lucide-${e}`,a),...i}));return a.displayName=n(e),a}},5255:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(3592).Z)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]])},5784:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(3592).Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},3917:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(3592).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},6286:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(3592).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8141:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let r=a(5577),s=a(997),i=r._(a(6689)),n=a(5782);async function l(e){let{Component:t,ctx:a}=e;return{pageProps:await (0,n.loadGetInitialProps)(t,a)}}class o extends i.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,s.jsx)(e,{...t})}}o.origGetInitialProps=l,o.getInitialProps=l,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},550:(e,t,a)=>{a.a(e,async(e,r)=>{try{let e;a.d(t,{O:()=>e});var s=a(2885);try{console.log("Initializing Supabase client...");let t="https://risitify.com",a="your-production-anon-key";if(console.log("Supabase URL:",t),console.log("Supabase Anon Key:",a?"Provided":"Missing"),!t||!a)throw Error("Missing Supabase environment variables");e=(0,s.createClient)(t,a,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:void 0}}),console.log("Testing Supabase connection...");let{data:r,error:i}=await e.auth.getSession();i?console.error("Supabase connection test failed:",i):console.log("Supabase connection test successful"),console.log("Supabase client initialized successfully")}catch(e){throw console.error("Error initializing Supabase client:",e),e}r()}catch(e){r(e)}},1)},5504:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>y});var s=a(997),i=a(6689),n=a(4661),l=a(550),o=a(3917),d=a(6286),c=a(5784),u=a(5255),p=e([l]);l=(p.then?(await p)():p)[0];let m=({title:e,value:t,change:a,positive:r})=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow px-5 py-6",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:e}),s.jsx("div",{className:"mt-1 text-3xl font-semibold text-gray-900",children:t}),(0,s.jsxs)("div",{className:"mt-1",children:[s.jsx("span",{className:`text-sm font-medium ${r?"text-green-600":"text-red-600"}`,children:a}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"from last month"})]})]}),x=({title:e,description:t,time:a})=>(0,s.jsxs)("li",{className:"bg-gray-50 px-4 py-3 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e}),s.jsx("p",{className:"text-sm text-gray-500",children:a})]}),s.jsx("p",{className:"text-sm text-gray-500",children:t})]}),h=({title:e,icon:t,href:a,color:r})=>(0,s.jsxs)(n.Link,{to:a,className:"flex items-center p-4 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50",children:[s.jsx("div",{className:`${r} p-3 rounded-lg text-white mr-3`,children:t}),s.jsx("div",{className:"font-medium",children:e})]}),g=({id:e,client:t,amount:a,dueDate:r,status:i})=>(0,s.jsxs)("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-brand-primary",children:(0,s.jsxs)(n.Link,{to:`/invoices/${e}`,children:["#",e]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${{draft:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",overdue:"bg-red-100 text-red-800"}[i]}`,children:i.charAt(0).toUpperCase()+i.slice(1)})})]}),y=()=>{let[e,t]=(0,i.useState)(!0),[a,r]=(0,i.useState)({totalRevenue:0,pendingAmount:0,paidAmount:0,overdueAmount:0}),[p,y]=(0,i.useState)([]),[f,v]=(0,i.useState)([]);(0,i.useEffect)(()=>{b()},[]);let b=async()=>{try{t(!0);let{data:{user:e}}=await l.O.auth.getUser();if(!e)throw Error("No user found");let{data:a,error:s}=await l.O.from("invoices").select(`
          id,
          client_id,
          clients (name),
          total_amount,
          status,
          due_date,
          created_at
        `).eq("user_id",e.id).order("created_at",{ascending:!1});if(s)throw s;let i=a.reduce((e,t)=>{let a=t.total_amount||0;switch(t.status){case"paid":e.paidAmount+=a,e.totalRevenue+=a;break;case"pending":e.pendingAmount+=a;break;case"overdue":e.overdueAmount+=a}return e},{totalRevenue:0,pendingAmount:0,paidAmount:0,overdueAmount:0}),n=a.slice(0,5),o=new Date;o.setDate(o.getDate()+30);let d=a.filter(e=>"pending"===e.status&&new Date(e.due_date)<=o).slice(0,4);r(i),y(n),v(d)}catch(e){console.error("Error fetching dashboard data:",e)}finally{t(!1)}},j=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),w=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),N=e=>{let t=new Date(e),a=new Date,r=Math.floor((a.getTime()-t.getTime())/1e3);return r<60?"just now":r<3600?`${Math.floor(r/60)} minutes ago`:r<86400?`${Math.floor(r/3600)} hours ago`:r<604800?`${Math.floor(r/86400)} days ago`:w(e)};return e?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(m,{title:"Total Revenue",value:j(a.totalRevenue),change:"+12.5%",positive:!0}),s.jsx(m,{title:"Pending Invoices",value:j(a.pendingAmount),change:"-2.4%",positive:!1}),s.jsx(m,{title:"Paid Invoices",value:j(a.paidAmount),change:"+18.2%",positive:!0}),s.jsx(m,{title:"Overdue Invoices",value:j(a.overdueAmount),change:"-5.1%",positive:!0})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Recent Activity"})}),s.jsx("div",{className:"px-6 py-5",children:s.jsx("ul",{className:"space-y-4",children:p.map(e=>s.jsx(x,{title:`Invoice #${e.id} ${e.status}`,description:`Client: ${e.clients?.name} - ${j(e.total_amount)}`,time:N(e.created_at)},e.id))})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Quick Actions"})}),s.jsx("div",{className:"px-6 py-5",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(h,{title:"Create Invoice",icon:s.jsx(o.Z,{className:"h-6 w-6"}),href:"/invoices/new",color:"bg-brand-primary"}),s.jsx(h,{title:"Add Client",icon:s.jsx(d.Z,{className:"h-6 w-6"}),href:"/clients/new",color:"bg-brand-yellow"}),s.jsx(h,{title:"Record Payment",icon:s.jsx(c.Z,{className:"h-6 w-6"}),href:"/payments/new",color:"bg-brand-coral"}),s.jsx(h,{title:"Generate Report",icon:s.jsx(u.Z,{className:"h-6 w-6"}),href:"/reports/new",color:"bg-brand-purple"})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Upcoming Invoices"}),s.jsx(n.Link,{to:"/invoices",className:"text-sm text-brand-primary font-medium hover:text-brand-primary/80",children:"View all"})]}),s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>s.jsx(g,{id:e.id,client:e.clients?.name||"Unknown",amount:j(e.total_amount),dueDate:w(e.due_date),status:e.status},e.id))})]})})]})]})};r()}catch(e){r(e)}})},5244:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},2885:e=>{e.exports=require("@supabase/supabase-js")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},4661:e=>{e.exports=require("react-router-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5315:e=>{e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1682],()=>a(2186));module.exports=r})();