"use strict";(()=>{var e={};e.id=5249,e.ids=[5249,660],e.modules={262:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{config:()=>f,default:()=>m,getServerSideProps:()=>x,getStaticPaths:()=>g,getStaticProps:()=>h,reportWebVitals:()=>y,routeModule:()=>w,unstable_getServerProps:()=>_,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>v});var s=t(7093),i=t(5244),o=t(1323),n=t(1682),l=t.n(n),d=t(8141),c=t.n(d),u=t(4962),p=e([u]);u=(p.then?(await p)():p)[0];let m=(0,o.l)(u,"default"),h=(0,o.l)(u,"getStaticProps"),g=(0,o.l)(u,"getStaticPaths"),x=(0,o.l)(u,"getServerSideProps"),f=(0,o.l)(u,"config"),y=(0,o.l)(u,"reportWebVitals"),v=(0,o.l)(u,"unstable_getStaticProps"),j=(0,o.l)(u,"unstable_getStaticPaths"),b=(0,o.l)(u,"unstable_getStaticParams"),_=(0,o.l)(u,"unstable_getServerProps"),N=(0,o.l)(u,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/settings/Organization",pathname:"/settings/Organization",bundlePath:"",filename:""},components:{App:c(),Document:l()},userland:u});r()}catch(e){r(e)}})},3592:(e,a,t)=>{t.d(a,{Z:()=>u});var r=t(6689);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase()),o=e=>{let a=i(e);return a.charAt(0).toUpperCase()+a.slice(1)},n=(...e)=>e.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim(),l=e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:o,iconNode:c,...u},p)=>(0,r.createElement)("svg",{ref:p,...d,width:a,height:a,stroke:e,strokeWidth:s?24*Number(t)/Number(a):t,className:n("lucide",i),...!o&&!l(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,a])=>(0,r.createElement)(e,a)),...Array.isArray(o)?o:[o]])),u=(e,a)=>{let t=(0,r.forwardRef)(({className:t,...i},l)=>(0,r.createElement)(c,{ref:l,iconNode:a,className:n(`lucide-${s(o(e))}`,`lucide-${e}`,t),...i}));return t.displayName=o(e),t}},9763:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(3592).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6391:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(3592).Z)("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},7095:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{I:()=>l});var s=t(997),i=t(6689),o=t(7742),n=e([o]);o=(n.then?(await n)():n)[0];let l=i.forwardRef(({className:e,type:a,...t},r)=>s.jsx("input",{type:a,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));l.displayName="Input",r()}catch(e){r(e)}})},7825:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{_:()=>u});var s=t(997),i=t(6689),o=t(49),n=t(6926),l=t(7742),d=e([o,n,l]);[o,n,l]=d.then?(await d)():d;let c=(0,n.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=i.forwardRef(({className:e,...a},t)=>s.jsx(o.Root,{ref:t,className:(0,l.cn)(c(),e),...a}));u.displayName=o.Root.displayName,r()}catch(e){r(e)}})},9451:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{g:()=>l});var s=t(997),i=t(6689),o=t(7742),n=e([o]);o=(n.then?(await n)():n)[0];let l=i.forwardRef(({className:e,...a},t)=>s.jsx("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));l.displayName="Textarea",r()}catch(e){r(e)}})},7568:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{a:()=>l}),t(997);var s=t(6689),i=t(550),o=e([i]);i=(o.then?(await o)():o)[0];let n=(0,s.createContext)({session:null,user:null,signOut:async()=>{},loading:!0,isAdmin:!1,userRole:null,updateUserProfile:async()=>{}}),l=()=>{let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e};r()}catch(e){r(e)}})},4962:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>f});var s=t(997),i=t(6689),o=t(4661),n=t(5364),l=t(7095),d=t(7825),c=t(9451),u=t(9763),p=t(6391),m=t(8604),h=t(7568),g=t(7270),x=e([n,l,d,c,m,h,g]);[n,l,d,c,m,h,g]=x.then?(await x)():x;let f=()=>{let{id:e}=(0,o.useParams)(),a=(0,o.useNavigate)(),{user:t}=(0,h.a)(),[r,x]=(0,i.useState)(!1),[f,y]=(0,i.useState)({name:"",profile_name:"",address:"",phone:"",email:"",city:"",state:"",country:"",postal_code:"",tax_id:"",logo_url:""});(0,i.useEffect)(()=>{e&&v()},[e]);let v=async()=>{try{x(!0);let a=await m.z.getOrganizationById(e);y({name:a.name,profile_name:a.profile_name,address:a.address,phone:a.phone,email:a.email,city:a.city,state:a.state,country:a.country,postal_code:a.postal_code,tax_id:a.tax_id,logo_url:a.logo_url})}catch(e){console.error("Error fetching organization:",e),g.toast.error("Failed to load organization")}finally{x(!1)}},j=e=>{let{name:a,value:t}=e.target;y(e=>({...e,[a]:t}))},b=async e=>{if(e.target.files?.[0])try{x(!0),g.toast.success("Logo uploaded successfully")}catch(e){console.error("Error uploading logo:",e),g.toast.error("Failed to upload logo")}finally{x(!1)}},_=async r=>{r.preventDefault(),x(!0);try{if(!t?.id)throw Error("User not authenticated");e?(await m.z.updateOrganization(e,f),g.toast.success("Organization updated successfully")):(await m.z.createOrganization({...f,user_id:t.id}),g.toast.success("Organization created successfully")),a("/settings/organizations")}catch(e){console.error("Error saving organization:",e),g.toast.error("Failed to save organization")}finally{x(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx(n.z,{variant:"ghost",size:"icon",onClick:()=>a("/settings/organizations"),children:s.jsx(u.Z,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:e?"Edit Organization":"New Organization"}),s.jsx("p",{className:"text-muted-foreground",children:e?"Update your organization details":"Create a new organization for your business"})]})]}),(0,s.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"name",children:"Profile Name"}),s.jsx(l.I,{id:"name",name:"name",value:f.name,onChange:j,placeholder:"Enter profile name",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"profile_name",children:"Organization Name"}),s.jsx(l.I,{id:"profile_name",name:"profile_name",value:f.profile_name,onChange:j,placeholder:"Enter organization name",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"email",children:"Email"}),s.jsx(l.I,{id:"email",name:"email",type:"email",value:f.email,onChange:j,placeholder:"Enter email address",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"phone",children:"Phone"}),s.jsx(l.I,{id:"phone",name:"phone",value:f.phone,onChange:j,placeholder:"Enter phone number",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"city",children:"City"}),s.jsx(l.I,{id:"city",name:"city",value:f.city,onChange:j,placeholder:"Enter city"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"state",children:"State/Province"}),s.jsx(l.I,{id:"state",name:"state",value:f.state,onChange:j,placeholder:"Enter state/province"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"country",children:"Country"}),s.jsx(l.I,{id:"country",name:"country",value:f.country,onChange:j,placeholder:"Enter country"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"postal_code",children:"Postal Code"}),s.jsx(l.I,{id:"postal_code",name:"postal_code",value:f.postal_code,onChange:j,placeholder:"Enter postal code"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"tax_id",children:"Registration Number (RC/BN)"}),s.jsx(l.I,{id:"tax_id",name:"tax_id",value:f.tax_id,onChange:j,placeholder:"Enter registration number"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"logo",children:"Logo"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(l.I,{id:"logo",name:"logo",type:"file",accept:"image/*",onChange:b,className:"hidden"}),(0,s.jsxs)(n.z,{type:"button",variant:"outline",onClick:()=>document.getElementById("logo")?.click(),className:"flex items-center gap-2",children:[s.jsx(p.Z,{className:"h-4 w-4"}),"Upload Logo"]}),f.logo_url&&s.jsx("img",{src:f.logo_url,alt:"Organization logo",className:"h-8 w-8 rounded-full"})]})]}),(0,s.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(d._,{htmlFor:"address",children:"Address"}),s.jsx(c.g,{id:"address",name:"address",value:f.address,onChange:j,placeholder:"Enter organization address",required:!0})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[s.jsx(n.z,{type:"button",variant:"outline",onClick:()=>a("/settings/organizations"),children:"Cancel"}),s.jsx(n.z,{type:"submit",disabled:r,children:r?"Saving...":e?"Update Organization":"Create Organization"})]})]})]})};r()}catch(e){r(e)}})},2885:e=>{e.exports=require("@supabase/supabase-js")},7276:e=>{e.exports=require("html2canvas")},5158:e=>{e.exports=require("jspdf")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},4661:e=>{e.exports=require("react-router-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5315:e=>{e.exports=require("path")},49:e=>{e.exports=import("@radix-ui/react-label")},4338:e=>{e.exports=import("@radix-ui/react-slot")},6926:e=>{e.exports=import("class-variance-authority")},6593:e=>{e.exports=import("clsx")},7270:e=>{e.exports=import("sonner")}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[1682,1106],()=>t(262));module.exports=r})();