"use strict";(()=>{var e={};e.id=5928,e.ids=[5928,660],e.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},457:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>y,default:()=>x,getServerSideProps:()=>m,getStaticPaths:()=>g,getStaticProps:()=>h,reportWebVitals:()=>f,routeModule:()=>S,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>j,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>w});var s=r(7093),i=r(5244),n=r(1323),l=r(1682),o=r.n(l),c=r(8141),d=r.n(c),u=r(7358),p=e([u]);u=(p.then?(await p)():p)[0];let x=(0,n.l)(u,"default"),h=(0,n.l)(u,"getStaticProps"),g=(0,n.l)(u,"getStaticPaths"),m=(0,n.l)(u,"getServerSideProps"),y=(0,n.l)(u,"config"),f=(0,n.l)(u,"reportWebVitals"),w=(0,n.l)(u,"unstable_getStaticProps"),v=(0,n.l)(u,"unstable_getStaticPaths"),b=(0,n.l)(u,"unstable_getStaticParams"),P=(0,n.l)(u,"unstable_getServerProps"),j=(0,n.l)(u,"unstable_getServerSideProps"),S=new s.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/AgedBalance",pathname:"/AgedBalance",bundlePath:"",filename:""},components:{App:d(),Document:o()},userland:u});a()}catch(e){a(e)}})},3592:(e,t,r)=>{r.d(t,{Z:()=>u});var a=r(6689);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:n,iconNode:d,...u},p)=>(0,a.createElement)("svg",{ref:p,...c,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:l("lucide",i),...!n&&!o(u)&&{"aria-hidden":"true"},...u},[...d.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(n)?n:[n]])),u=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...i},o)=>(0,a.createElement)(d,{ref:o,iconNode:t,className:l(`lucide-${s(n(e))}`,`lucide-${e}`,r),...i}));return r.displayName=n(e),r}},9763:(e,t,r)=>{r.d(t,{Z:()=>a});let a=(0,r(3592).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8141:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=r(5577),s=r(997),i=a._(r(6689)),n=r(5782);async function l(e){let{Component:t,ctx:r}=e;return{pageProps:await (0,n.loadGetInitialProps)(t,r)}}class o extends i.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,s.jsx)(e,{...t})}}o.origGetInitialProps=l,o.getInitialProps=l,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7568:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{a:()=>o}),r(997);var s=r(6689),i=r(550),n=e([i]);i=(n.then?(await n)():n)[0];let l=(0,s.createContext)({session:null,user:null,signOut:async()=>{},loading:!0,isAdmin:!1,userRole:null,updateUserProfile:async()=>{}}),o=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e};a()}catch(e){a(e)}})},550:(e,t,r)=>{r.a(e,async(e,a)=>{try{let e;r.d(t,{O:()=>e});var s=r(2885);try{console.log("Initializing Supabase client...");let t="https://risitify.com",r="your-production-anon-key";if(console.log("Supabase URL:",t),console.log("Supabase Anon Key:",r?"Provided":"Missing"),!t||!r)throw Error("Missing Supabase environment variables");e=(0,s.createClient)(t,r,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:void 0}}),console.log("Testing Supabase connection...");let{data:a,error:i}=await e.auth.getSession();i?console.error("Supabase connection test failed:",i):console.log("Supabase connection test successful"),console.log("Supabase client initialized successfully")}catch(e){throw console.error("Error initializing Supabase client:",e),e}a()}catch(e){a(e)}},1)},7523:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{T:()=>n});var s=r(550),i=e([s]);s=(i.then?(await i)():i)[0];let n={async getClients(){let{data:e,error:t}=await s.O.from("clients").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async getClient(e){let{data:t,error:r}=await s.O.from("clients").select("*").eq("id",e).single();if(r)throw r;return t},async createClient(e){let{data:t,error:r}=await s.O.from("clients").insert(e).select().single();if(r)throw r;return t},async updateClient(e,t){let{data:r,error:a}=await s.O.from("clients").update(t).eq("id",e).select().single();if(a)throw a;return r},async deleteClient(e){let{error:t}=await s.O.from("clients").delete().eq("id",e);if(t)throw t}};a()}catch(e){a(e)}})},7358:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>p});var s=r(997),i=r(6689),n=r(4661),l=r(9763),o=r(7523),c=r(7270),d=r(7568),u=e([o,c,d]);[o,c,d]=u.then?(await u)():u;let p=()=>{let{user:e}=(0,d.a)(),[t,r]=(0,i.useState)([]),[a,u]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{(async()=>{if(e)try{let e=(await o.T.getClients()).map(e=>({...e,current:0,overdue_30:0,overdue_60:0,overdue_90:0,overdue_120:0}));r(e)}catch(e){console.error("Error fetching aged balance:",e),c.toast.error("Failed to load aged balance")}finally{u(!1)}})()},[e]),a)?s.jsx("div",{children:"Loading..."}):s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)(n.Link,{to:"/clients",className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700",children:[s.jsx(l.Z,{className:"h-4 w-4 mr-2"}),"Back to Clients"]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Aged Balance"}),s.jsx("p",{className:"text-gray-500 mt-1",children:"View client aging reports"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"1-30 Days"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"31-60 Days"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"61-90 Days"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"90+ Days"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:["$",e.current.toFixed(2)]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:["$",e.overdue_30.toFixed(2)]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:["$",e.overdue_60.toFixed(2)]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:["$",e.overdue_90.toFixed(2)]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:["$",e.overdue_120.toFixed(2)]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900",children:["$",(e.current+e.overdue_30+e.overdue_60+e.overdue_90+e.overdue_120).toFixed(2)]})]},e.id))})]})})})]})})};a()}catch(e){a(e)}})},5244:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},2885:e=>{e.exports=require("@supabase/supabase-js")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},4661:e=>{e.exports=require("react-router-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5315:e=>{e.exports=require("path")},7270:e=>{e.exports=import("sonner")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[1682],()=>r(457));module.exports=a})();